<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Allocate discrete seats given continuous votes — dhondt • zulutils</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Allocate discrete seats given continuous votes — dhondt"><meta property="og:description" content="The dhondt() function can be used to allocate a discrete number of seats
(or other resources) between parties according to a continuous number of
votes (or other claims on the resource), in a way that approximates
proportionality. Semi-proportionality is achieved with the D'Hondt method,
which is a commonly used approach in electoral allocation.
Other implementations of D'Hondt allocation in R can be found in
electoral::seats_ha() and coalitions::dHondt(). The motivation behind
this implementation is to have a simple interface with reasonable defaults,
suitable for use in pipes operating on data in data.frames or tibbles. The
error handling is also more explicit here than in other implementations.
Finally, party names are optional, which is useful if there are no natural
names for the parties.
The largest_remainder() allocates votes in a way parallel to the
dhondt() function, but using the least remainder method, instead of a
greatest divisors method. An alternative implementation exists in
electoral::seats_lr(), and possibly in coalitions::hare_niemeyer().
The rationale for implementation of this function is comparable to that for
dhondt().
NOTE: Tie handling has currently not been fully implemented for
largest_remainder()."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">zulutils</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Allocate discrete seats given continuous votes</h1>
    
    <div class="hidden name"><code>dhondt.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The <code>dhondt()</code> function can be used to allocate a discrete number of seats
(or other resources) between parties according to a continuous number of
votes (or other claims on the resource), in a way that approximates
proportionality. Semi-proportionality is achieved with the D'Hondt method,
which is a commonly used approach in electoral allocation.</p>
<p>Other implementations of D'Hondt allocation in <code>R</code> can be found in
<code><a href="https://rdrr.io/pkg/electoral/man/seats_highest_averages.html" class="external-link">electoral::seats_ha()</a></code> and <code><a href="https://adibender.github.io/coalitions/reference/dHondt.html" class="external-link">coalitions::dHondt()</a></code>. The motivation behind
this implementation is to have a simple interface with reasonable defaults,
suitable for use in pipes operating on data in data.frames or tibbles. The
error handling is also more explicit here than in other implementations.
Finally, party names are optional, which is useful if there are no natural
names for the parties.</p>
<p>The <code>largest_remainder()</code> allocates votes in a way parallel to the
<code>dhondt()</code> function, but using the least remainder method, instead of a
greatest divisors method. An alternative implementation exists in
<code><a href="https://rdrr.io/pkg/electoral/man/seats_largest_remainders.html" class="external-link">electoral::seats_lr()</a></code>, and possibly in <code><a href="https://adibender.github.io/coalitions/reference/hare_niemeyer.html" class="external-link">coalitions::hare_niemeyer()</a></code>.
The rationale for implementation of this function is comparable to that for
<code>dhondt()</code>.</p>
<p><code>NOTE:</code> Tie handling has currently not been fully implemented for
<code>largest_remainder()</code>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">dhondt</span><span class="op">(</span><span class="va">votes</span>, seats <span class="op">=</span> <span class="fl">7</span>, ties <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"error"</span>, <span class="st">"first"</span><span class="op">)</span><span class="op">)</span>

<span class="fu">largest_remainder</span><span class="op">(</span><span class="va">votes</span>, seats <span class="op">=</span> <span class="fl">7</span>, ties <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"undefined"</span>, <span class="st">"error"</span>, <span class="st">"first"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>votes</dt>
<dd><p>A vector with the votes of different parties. The number of
parties is determined based on the length of the vector. Votes can be given
in whole or real numbers, and there is no requirement that they sum up to 1
or 100.</p></dd>
<dt>seats</dt>
<dd><p>An integer giving the number of seats to allocate. Defaults to
7, which is a common size of boards and other deliberative bodies (and a
pretty nice number in general), but one would almost always want to specify
this.</p></dd>
<dt>ties</dt>
<dd><p>A character variable specifying what to do in case of ties. The
D'Hondt method does not specify any tie handling, so two options are
allowed. Specifying <code>"error"</code> (the default) results in an error if there is
a tie for the marginal allocated seat. Specifying <code>"first"</code> means that the
party that comes first (in the <code>votes</code> vector) wins. Methods such as
allocating randomly or favoring the largest party can be achieved by
ordering the <code>votes</code> vector prior to calling the function.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>An integer vector with allocations of seats to parties, in the same
order as the parties were specified in the <code>votes</code> vector. The length of
the result vector always equals the length of the <code>votes</code> vector. The sum
of the result vector always equals the value in <code>seats</code>. If the <code>votes</code>vector has names, the results vector has the same names.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="fu">dhondt</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">13</span>,<span class="fl">11</span>,<span class="fl">7</span>,<span class="fl">5</span>,<span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 3 2 1 1 0</span>
<span class="r-in"><span class="fu">dhondt</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>liberals<span class="op">=</span><span class="fl">4876</span>, conservatives<span class="op">=</span><span class="fl">5212</span>, greens<span class="op">=</span><span class="fl">2349</span><span class="op">)</span>, seats<span class="op">=</span><span class="fl">21</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      liberals conservatives        greens </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             8             9             4 </span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">largest_remainder</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">13</span>,<span class="fl">11</span>,<span class="fl">7</span>,<span class="fl">5</span>,<span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2 2 1 1 1</span>
<span class="r-in"><span class="fu">largest_remainder</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>liberals<span class="op">=</span><span class="fl">4876</span>, conservatives<span class="op">=</span><span class="fl">5212</span>, greens<span class="op">=</span><span class="fl">2349</span><span class="op">)</span>, seats<span class="op">=</span><span class="fl">21</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      liberals conservatives        greens </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             8             9             4 </span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Magnus Thor Torfason.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

